<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Dé de la fortune</title>
<style>
  body {
    margin: 0;
    background: #0a0a14;
    color: #cdb7ff;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    height: 100vh;
    user-select: none;
  }
  h1 {
    margin: 20px 0 10px;
    text-shadow: 0 0 10px #8b3dff;
  }
  #jackpot, #chance {
    font-size: 1.5em;
    margin: 8px 0 20px;
    text-shadow: 0 0 10px #a966ff;
  }
  .dice-container {
    display: flex;
    gap: 15px;
    margin-bottom: 30px;
  }
  .dice {
    width: 70px;
    height: 70px;
    background: #1a1140;
    border-radius: 12px;
    box-shadow: 0 0 20px #9b42ff, 0 0 25px #7a1eff inset;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 2.8rem;
    color: #d9b0ff;
    font-weight: bold;
    position: relative;
    transition: box-shadow 0.3s ease;
  }
  .dice.animate {
    animation: neonGlow 1s ease infinite alternate;
  }
  @keyframes neonGlow {
    0% {
      box-shadow: 0 0 20px #b063ff, 0 0 30px #a454ff inset;
      color: #f5e0ff;
    }
    100% {
      box-shadow: 0 0 40px #e3a7ff, 0 0 50px #bc7bff inset;
      color: #fff7ff;
    }
  }
  .buttons {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    justify-content: center;
    margin-bottom: 30px;
  }
  button {
    background: #3a1a8e;
    border: none;
    border-radius: 8px;
    color: #eecbff;
    padding: 12px 20px;
    font-size: 1.1rem;
    cursor: pointer;
    box-shadow: 0 0 10px #b56cff;
    transition: background-color 0.3s ease;
  }
  button:hover {
    background: #7a3cff;
    box-shadow: 0 0 20px #db8cff;
  }
  #message {
    font-size: 1.3rem;
    height: 28px;
    margin-top: 10px;
    color: #ff7baa;
    text-shadow: 0 0 6px #ff5e99;
  }
  .neon-background {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background:
      radial-gradient(circle at 20% 30%, rgba(155,66,255,0.15), transparent 40%),
      radial-gradient(circle at 80% 70%, rgba(167,122,255,0.1), transparent 50%);
    z-index: -1;
  }
</style>
</head>
<body>

<h1>Dé de la fortune</h1>
<div id="jackpot">Jackpot en cours : 0</div>
<div id="chance">Chance de gagner à chaque tirage : 0.00077%</div>

<div class="dice-container">
  <div class="dice" id="dice1">?</div>
  <div class="dice" id="dice2">?</div>
  <div class="dice" id="dice3">?</div>
  <div class="dice" id="dice4">?</div>
  <div class="dice" id="dice5">?</div>
  <div class="dice" id="dice6">?</div>
</div>

<div class="buttons">
  <button data-draw="1">1 tirage</button>
  <button data-draw="10">10 tirages</button>
  <button data-draw="30">30 tirages</button>
  <button data-draw="100">100 tirages</button>
  <button data-draw="1000">1000 tirages</button>
  <button id="quickDraw">Tirage rapide : OFF</button>
</div>

<div id="message"></div>

<div class="neon-background"></div>

<script>
  const diceEls = [
    document.getElementById('dice1'),
    document.getElementById('dice2'),
    document.getElementById('dice3'),
    document.getElementById('dice4'),
    document.getElementById('dice5'),
    document.getElementById('dice6')
  ];
  
  const jackpotDisplay = document.getElementById('jackpot');
  const chanceDisplay = document.getElementById('chance');
  const messageEl = document.getElementById('message');
  const buttons = document.querySelectorAll('.buttons button[data-draw]');
  const quickDrawBtn = document.getElementById('quickDraw');
  
  let jackpotCount = 0;
  let isDrawing = false;
  let quickDrawMode = false;

  // Probabilité de faire 36 (6 dés à 6 faces)
  // C'est 1 chance sur 6^6 = 1/46656 ≈ 0.00214%
  // Affichage avec 5 décimales
  const winProbability = (1 / Math.pow(6, 6)) * 100;

  chanceDisplay.textContent = `Chance de gagner à chaque tirage : ${winProbability.toFixed(5)}%`;

  function rollDiceAnimation(diceEl) {
    diceEl.classList.add('animate');
    return new Promise(resolve => {
      setTimeout(() => {
        diceEl.classList.remove('animate');
        resolve();
      }, 800);
    });
  }

  function rollDiceOnce() {
    return Math.floor(Math.random() * 6) + 1;
  }

  async function runDraws(count) {
    if (isDrawing) return;
    isDrawing = true;
    messageEl.textContent = '';
    incrementJackpot();

    for (let i = 0; i < count; i++) {
      let score;
      if (!quickDrawMode) {
        await Promise.all(diceEls.map(die => rollDiceAnimation(die)));
        score = 0;
        diceEls.forEach(die => {
          const val = rollDiceOnce();
          die.textContent = val;
          score += val;
        });
      } else {
        score = 0;
        for (let j = 0; j < 6; j++) {
          const val = rollDiceOnce();
          diceEls[j].textContent = val;
          score += val;
        }
      }

      if (score === 36) {
        document.body.innerHTML = '<h1 style="color:#00ff00; text-align:center; font-size:5rem; margin-top:20vh; text-shadow: 0 0 15px #00ff00;">JACKPOT REMPORTE</h1>';
        document.body.style.backgroundColor = '#004d00';
        isDrawing = false;
        return;
      }
    }

    isDrawing = false;
    if (messageEl.textContent === '') {
      messageEl.textContent = `Fin de ${count} tirage(s)`;
    }
  }

  function incrementJackpot() {
    jackpotCount++;
    jackpotDisplay.textContent = `Jackpot en cours : ${jackpotCount}`;
  }

  buttons.forEach(button => {
    button.addEventListener('click', () => {
      if (isDrawing) return;
      quickDrawMode = false;
      runDraws(parseInt(button.dataset.draw));
    });
  });

  quickDrawBtn.addEventListener('click', () => {
    if (isDrawing) return;
    quickDrawMode = !quickDrawMode;
    quickDrawBtn.textContent = quickDrawMode ? 'Tirage rapide : ON' : 'Tirage rapide : OFF';
  });
</script>

</body>
</html>
