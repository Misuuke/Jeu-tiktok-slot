<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Dé de la fortune</title>
<style>
  body {
    margin: 0;
    background: #0a0a14;
    color: #cdb7ff;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    height: 100vh;
    user-select: none;
  }
  h1 {
    margin: 20px 0 0 0;
    text-shadow: 0 0 10px #8b3dff;
  }
  p.instruction {
    color: #bca1ffcc;
    font-size: 1rem;
    font-style: italic;
    margin-top: -10px;
    margin-bottom: 20px;
    text-align: center;
    max-width: 480px;
    user-select: none;
    text-shadow: 0 0 5px #7a5affcc;
  }
  #jackpot {
    font-size: 1.5em;
    margin: 8px 0 0 0;
    text-shadow: 0 0 10px #a966ff;
  }
  #drawCount {
    font-size: 1.15em;
    margin: 8px 0 20px 0;
    color: #bff9fd;
    text-shadow: 0 0 5px #4bb2efcc;
    user-select: none;
  }
  #chance {
    font-size: 0.9em;
    position: fixed;
    bottom: 15px;
    left: 50%;
    transform: translateX(-50%);
    color: #bca1ffcc;
    text-shadow: 0 0 6px #7a5affcc;
    user-select: none;
    z-index: 10;
  }
  .dice-container {
    display: grid;
    grid-template-columns: repeat(3, 80px);
    grid-template-rows: repeat(2, 80px);
    gap: 15px;
    margin-bottom: 30px;
  }
  /* Dés blancs + effet néon violet */
  .dice {
    width: 80px;
    height: 80px;
    background: #fff;
    border-radius: 12px;
    box-shadow: 0 0 25px #a776ff, 0 0 15px #e1c7ff inset, 0 0 10px #9b42ff;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    perspective: 600px;
    cursor: default;
  }
  .dice img {
    width: 60px;
    height: 60px;
    backface-visibility: hidden;
    border-radius: 12px;
    box-shadow: 0 0 15px #b06aff;
    animation-fill-mode: forwards;
  }
  .rolling {
    animation: rollDiceAnim 0.8s ease forwards;
  }
  @keyframes rollDiceAnim {
    0% { transform: rotateX(0deg) rotateY(0deg); opacity: 1; }
    50% { transform: rotateX(720deg) rotateY(720deg); opacity: 0.6; }
    100% { transform: rotateX(0deg) rotateY(0deg); opacity: 1; }
  }
  .buttons {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    justify-content: center;
    margin-bottom: 30px;
  }
  button {
    background: #3a1a8e;
    border: none;
    border-radius: 8px;
    color: #eecbff;
    padding: 12px 20px;
    font-size: 1.1rem;
    cursor: pointer;
    box-shadow: 0 0 10px #b56cff;
    transition: background-color 0.3s ease;
  }
  button:hover {
    background: #7a3cff;
    box-shadow: 0 0 20px #db8cff;
  }
  #message {
    font-size: 1.3rem;
    height: 28px;
    margin-top: 10px;
    color: #ff7baa;
    text-shadow: 0 0 6px #ff5e99;
  }
  .neon-background {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background:
      radial-gradient(circle at 20% 30%, rgba(155,66,255,0.15), transparent 40%),
      radial-gradient(circle at 80% 70%, rgba(167,122,255,0.1), transparent 50%);
    z-index: -1;
  }
</style>
</head>
<body>

<h1>Dé de la fortune</h1>
<p class="instruction">Obtiens 6 sur tous tes dés et remporte le Jackpot</p>
<div id="jackpot">Jackpot en cours : 0</div>
<div id="drawCount">Nombre de tirages effectués : 0</div>
<div id="chance">Chance de gagner à chaque tirage : 0.00214%</div>

<div class="dice-container" aria-label="Dés du jeu">
  <div class="dice" id="dice1"><img src="https://upload.wikimedia.org/wikipedia/commons/1/1b/Dice-1-b.svg" alt="Dé face 1"></div>
  <div class="dice" id="dice2"><img src="https://upload.wikimedia.org/wikipedia/commons/1/1b/Dice-1-b.svg" alt="Dé face 1"></div>
  <div class="dice" id="dice3"><img src="https://upload.wikimedia.org/wikipedia/commons/1/1b/Dice-1-b.svg" alt="Dé face 1"></div>
  <div class="dice" id="dice4"><img src="https://upload.wikimedia.org/wikipedia/commons/1/1b/Dice-1-b.svg" alt="Dé face 1"></div>
  <div class="dice" id="dice5"><img src="https://upload.wikimedia.org/wikipedia/commons/1/1b/Dice-1-b.svg" alt="Dé face 1"></div>
  <div class="dice" id="dice6"><img src="https://upload.wikimedia.org/wikipedia/commons/1/1b/Dice-1-b.svg" alt="Dé face 1"></div>
</div>

<div class="buttons">
  <button data-draw="1">1 tirage</button>
  <button data-draw="10">10 tirages</button>
  <button data-draw="30">30 tirages</button>
  <button data-draw="100">100 tirages</button>
  <button data-draw="1000">1000 tirages</button>
  <button id="quickDraw">Tirage rapide : OFF</button>
</div>

<div id="message"></div>
<div class="neon-background"></div>

<script>
  const diceEls = [
    document.getElementById('dice1'),
    document.getElementById('dice2'),
    document.getElementById('dice3'),
    document.getElementById('dice4'),
    document.getElementById('dice5'),
    document.getElementById('dice6')
  ];
  
  const jackpotDisplay = document.getElementById('jackpot');
  const drawCountDisplay = document.getElementById('drawCount');
  const chanceDisplay = document.getElementById('chance');
  const messageEl = document.getElementById('message');
  const buttons = document.querySelectorAll('.buttons button[data-draw]');
  const quickDrawBtn = document.getElementById('quickDraw');
  
  let jackpotCount = 0;
  let drawCount = 0;
  let isDrawing = false;
  let quickDrawMode = false;

  const winProbability = (1 / Math.pow(6, 6)) * 100;
  chanceDisplay.textContent = `Chance de gagner à chaque tirage : ${winProbability.toFixed(5)}%`;

  const diceFaces = [
    "https://upload.wikimedia.org/wikipedia/commons/1/1b/Dice-1-b.svg",
    "https://upload.wikimedia.org/wikipedia/commons/5/5f/Dice-2-b.svg",
    "https://upload.wikimedia.org/wikipedia/commons/b/b1/Dice-3-b.svg",
    "https://upload.wikimedia.org/wikipedia/commons/f/fd/Dice-4-b.svg",
    "https://upload.wikimedia.org/wikipedia/commons/0/08/Dice-5-b.svg",
    "https://upload.wikimedia.org/wikipedia/commons/2/26/Dice-6-b.svg"
  ];

  function playRollAnimation(diceImg) {
    return new Promise(resolve => {
      diceImg.classList.add('rolling');
      setTimeout(() => {
        diceImg.classList.remove('rolling');
        resolve();
      }, 800);
    });
  }

  function rollDiceOnce() {
    return Math.floor(Math.random() * 6);
  }

  async function drawOnce() {
    await Promise.all(diceEls.map(die => playRollAnimation(die.querySelector('img'))));
    let totalScore = 0;
    diceEls.forEach(die => {
      const val = rollDiceOnce();
      die.querySelector('img').src = diceFaces[val];
      die.querySelector('img').alt = `Dé face ${val + 1}`;
      totalScore += val + 1;
    });
    return totalScore;
  }

  async function runDraws(count) {
    if (isDrawing) return;
    isDrawing = true;
    messageEl.textContent = '';
    incrementJackpot();
    drawCount += count;
    drawCountDisplay.textContent = `Nombre de tirages effectués : ${drawCount}`;

    for (let i = 0; i < count; i++) {
      let score;
      if (!quickDrawMode) {
        score = await drawOnce();
      } else {
        score = 0;
        diceEls.forEach(die => {
          const val = rollDiceOnce();
          die.querySelector('img').src = diceFaces[val];
          die.querySelector('img').alt = `Dé face ${val + 1}`;
          score += val + 1;
        });
      }

      if (score === 36) {
        document.body.innerHTML = '<h1 style="color:#00ff00; text-align:center; font-size:5rem; margin-top:20vh; text-shadow: 0 0 15px #00ff00;">JACKPOT REMPORTE</h1>';
        document.body.style.backgroundColor = '#004d00';
        isDrawing = false;
        return;
      }
    }

    isDrawing = false;
    if (messageEl.textContent === '') {
      messageEl.textContent = `Fin de ${count} tirage(s)`;
    }
  }

  function incrementJackpot() {
    jackpotCount++;
    jackpotDisplay.textContent = `Jackpot en cours : ${jackpotCount}`;
  }

  buttons.forEach(button => {
    button.addEventListener('click', () => {
      if (isDrawing) return;
      quickDrawMode = false;
      runDraws(parseInt(button.dataset.draw));
    });
  });

  quickDrawBtn.addEventListener('click', () => {
    if (isDrawing) return;
    quickDrawMode = !quickDrawMode;
    quickDrawBtn.textContent = quickDrawMode ? 'Tirage rapide : ON' : 'Tirage rapide : OFF';
  });
</script>

</body>
</html>
